(()=>{"use strict";class t{constructor(){this.SetCounter=()=>{Array.from(document.getElementsByClassName("counter")).forEach((t=>{const e=t;if(!e)return;const n=e.querySelector(".counter_increment"),s=e.querySelector(".counter_decrement"),o=e.querySelector(".counter_number"),a=parseInt(e.max)||100,r=parseInt(e.min)||0;let c,i=1;function u(t){let e=parseInt(o.value)||0;e+=t,e=Math.max(r,Math.min(a,e)),o.value=String(e)}function h(t,e){t.addEventListener("mousedown",(function(){i=1,u(e),c=setTimeout((function t(){i=5,u(e*i),c=setTimeout(t,200)}),500)})),t.addEventListener("mouseup",(function(){clearTimeout(c)})),t.addEventListener("mouseleave",(function(){clearTimeout(c)})),t.addEventListener("touchend",(function(){clearTimeout(c)}))}h(n,1),h(s,-1)}))}}}class e{constructor(){this.send=async(t,e,n,s,o="json",a=!0)=>{let r;r="GET"==e?new Request(t,{method:e,headers:n}):new Request(t,{method:e,headers:n,body:JSON.stringify(s)});const c=await fetch(r).catch((t=>{throw t}));if(!c.ok)throw new Error(c.statusText);if(a)switch(o){case"json":return await this.fetchResonse(c.json()).catch((t=>{throw t}));case"text":return await this.fetchResonse(c.text()).catch((t=>{throw t}))}}}async fetchResonse(t){return await t.then((t=>t)).catch((t=>{throw console.log(t),t}))}}class n{constructor(){this.setCoinsData=(t,e,n)=>{let s={coins:e,value:t};this.send(s).then((t=>{console.log(n),console.log(t),alert("支払いが完了しました")}))},this.send=async t=>{const n=new e;return await n.send(this.url,this.method,this.headers,t,this.responseKind).then((async t=>t)).catch((t=>{throw t}))},this.url="/Coins/PaymentComplete",this.method="POST",this.headers={"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},this.responseKind="text"}}class s{constructor(){this.SetPaypalButton=()=>{0!==document.getElementsByClassName("purcahse_coins").length&&(this.Create(120,1,"#paypal_button_120"),this.Create(600,6,"#paypal_button_600"),this.Create(1200,13,"#paypal_button_1200"),this.Create(3600,40,"#paypal_button_3600"),this.Create(6e3,68,"#paypal_button_6000"),this.Create(12e3,140,"#paypal_button_12000"))},this.Create=(t,e,s)=>{paypal.Buttons({createOrder:(e,n)=>n.order.create({purchase_units:[{amount:{value:t}}]}),onApprove:(s,o)=>o.order.capture().then((s=>{(new n).setCoinsData(t,e,s)}))}).render(s)}}}(()=>{const e=new t;(new s).SetPaypalButton(),e.SetCounter()})()})();